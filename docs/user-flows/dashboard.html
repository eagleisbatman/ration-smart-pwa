<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RationSmart - Home Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=IBM+Plex+Sans:wght@400;500;600&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
    <link rel="stylesheet" href="../shared.css">
</head>
<body>
    <nav class="sidebar">
        <div class="sidebar-brand"><i data-lucide="beef" class="icon"></i> RationSmart</div>
        <div class="sidebar-subtitle">User Flows &middot; 9 Pages</div>
        <h3>Authentication</h3>
        <a href="index.html"><span class="nav-num">00</span> Overview</a>
        <a href="registration.html"><span class="nav-num">01</span> Registration</a>
        <a href="login.html"><span class="nav-num">02</span> Login</a>
        <a href="forgot-pin.html"><span class="nav-num">03</span> Forgot PIN</a>
        <h3>Onboarding</h3>
        <a href="onboarding.html"><span class="nav-num">04</span> Onboarding (4 Steps)</a>
        <h3>Core App</h3>
        <a href="dashboard.html" class="active"><span class="nav-num">05</span> Home Dashboard</a>
        <a href="cow-management.html"><span class="nav-num">06</span> Cow Management</a>
        <a href="diet-wizard.html"><span class="nav-num">07</span> Diet Optimization</a>
        <a href="settings.html"><span class="nav-num">08</span> Settings</a>
    </nav>

    <main class="main">
        <div class="page-title">05 &mdash; Home Dashboard</div>
        <div class="page-route">Route: /</div>

        <p>The dashboard renders conditionally based on the user's role. Farmers, students, nutritionists, and researchers see the Farmer Dashboard by default. Extension workers (or users managing farmer profiles) see an additional organizational view with a toggle to switch between their farmers and their personal dashboard.</p>

        <!-- ──────────────────────────────────────────────────── -->
        <!-- Wireframe 1 — Farmer Dashboard                      -->
        <!-- ──────────────────────────────────────────────────── -->
        <h2>Farmer Dashboard</h2>

        <div class="phone-frame">
            <div class="phone-header">
                <i data-lucide="menu" class="icon"></i>
                <span style="flex:1;">RationSmart</span>
                <i data-lucide="refresh-cw" class="icon"></i>
            </div>
            <div class="phone-body">

                <!-- Greeting -->
                <div style="font-size:16px; font-weight:600; margin-bottom:14px;">Good morning, Rajesh!</div>

                <!-- Stats Row -->
                <div class="ui-row">
                    <div class="ui-stat">
                        <div class="num">3</div>
                        <div class="lbl">My Cows</div>
                    </div>
                    <div class="ui-stat">
                        <div class="num">12.5 L</div>
                        <div class="lbl">Today's Milk</div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="section-label">QUICK ACTIONS</div>
                <div class="ui-row">
                    <div class="ui-btn ui-btn-outline" style="display:flex; align-items:center; justify-content:center; gap:6px; padding:10px 6px; font-size:11px;">
                        <i data-lucide="droplet" class="icon" style="width:14px;height:14px;"></i> Log Milk
                    </div>
                    <div class="ui-btn ui-btn-outline" style="display:flex; align-items:center; justify-content:center; gap:6px; padding:10px 6px; font-size:11px;">
                        <i data-lucide="utensils" class="icon" style="width:14px;height:14px;"></i> Get Diet
                    </div>
                    <div class="ui-btn ui-btn-outline" style="display:flex; align-items:center; justify-content:center; gap:6px; padding:10px 6px; font-size:11px;">
                        <i data-lucide="plus" class="icon" style="width:14px;height:14px;"></i> Add Cow
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="section-label">RECENT ACTIVITY</div>
                <div class="ui-card">
                    <div style="font-size:13px; font-weight:500;">Milk logged for Lakshmi &mdash; 4.5L morning</div>
                    <div style="font-size:11px; color:var(--light-gray); margin-top:4px;">2 hours ago</div>
                </div>
                <div class="ui-card">
                    <div style="font-size:13px; font-weight:500;">Diet plan generated for Ganga &mdash; Balanced</div>
                    <div style="font-size:11px; color:var(--light-gray); margin-top:4px;">Yesterday</div>
                </div>

                <!-- Bottom Nav -->
                <div class="ui-nav">
                    <div class="on"><i data-lucide="home" class="icon" style="width:14px;height:14px;"></i><br>Home</div>
                    <div><i data-lucide="users" class="icon" style="width:14px;height:14px;"></i><br>Farmers</div>
                    <div><i data-lucide="bug" class="icon" style="width:14px;height:14px;"></i><br>Cows</div>
                    <div><i data-lucide="utensils" class="icon" style="width:14px;height:14px;"></i><br>Diet</div>
                    <div><i data-lucide="more-horizontal" class="icon" style="width:14px;height:14px;"></i><br>More</div>
                </div>

            </div>
        </div>

        <!-- Annotation: Farmer Dashboard -->
        <div class="annotation">
            <div class="annotation-title">Farmer Dashboard</div>
            <ul>
                <li>Shows for all users by default (farmer, student, nutritionist, researcher)</li>
                <li>Greeting uses time-of-day: morning / afternoon / evening + user's name</li>
                <li>Stats fetched from local cache, refreshed on mount</li>
                <li>Quick actions navigate to <code>/logs/new</code>, <code>/diet/new</code>, <code>/cows/new</code></li>
                <li>Recent activity shows last 5 actions</li>
            </ul>
        </div>

        <!-- ──────────────────────────────────────────────────── -->
        <!-- Wireframe 2 — Extension Worker Dashboard             -->
        <!-- ──────────────────────────────────────────────────── -->
        <h2>Extension Worker Dashboard</h2>

        <div class="phone-frame">
            <div class="phone-header">
                <i data-lucide="menu" class="icon"></i>
                <span style="flex:1;">RationSmart</span>
                <i data-lucide="refresh-cw" class="icon"></i>
            </div>
            <div class="phone-body">

                <!-- Toggle Bar -->
                <div class="ui-toggle">
                    <span class="on">My Farmers</span>
                    <span>Personal</span>
                </div>

                <!-- Stats Row -->
                <div class="ui-row">
                    <div class="ui-stat">
                        <div class="num">24</div>
                        <div class="lbl">Farmers</div>
                    </div>
                    <div class="ui-stat">
                        <div class="num">5</div>
                        <div class="lbl">Pending Yields</div>
                    </div>
                </div>

                <!-- Actions -->
                <div class="section-label">ACTIONS</div>
                <div class="ui-row">
                    <div class="ui-btn ui-btn-outline" style="display:flex; align-items:center; justify-content:center; gap:6px; padding:10px 6px; font-size:11px;">
                        <i data-lucide="user-plus" class="icon" style="width:14px;height:14px;"></i> Add Farmer
                    </div>
                    <div class="ui-btn ui-btn-outline" style="display:flex; align-items:center; justify-content:center; gap:6px; padding:10px 6px; font-size:11px;">
                        <i data-lucide="bar-chart" class="icon" style="width:14px;height:14px;"></i> Record Yield
                    </div>
                    <div class="ui-btn ui-btn-outline" style="display:flex; align-items:center; justify-content:center; gap:6px; padding:10px 6px; font-size:11px;">
                        <i data-lucide="upload" class="icon" style="width:14px;height:14px;"></i> Import CSV
                    </div>
                </div>

                <!-- My Farmers List -->
                <div class="section-label">MY FARMERS</div>
                <div class="ui-card">
                    <div style="display:flex; justify-content:space-between; align-items:center;">
                        <div style="font-size:14px; font-weight:600;">Rajesh Kumar</div>
                        <i data-lucide="chevron-right" class="icon" style="width:14px;height:14px; color:var(--light-gray);"></i>
                    </div>
                    <div style="font-size:12px; color:var(--mid-gray); margin-top:2px;">3 cows &middot; 12.5L today</div>
                    <div style="font-size:11px; color:var(--light-gray); margin-top:2px;">Village: Hastinapur</div>
                </div>
                <div class="ui-card">
                    <div style="display:flex; justify-content:space-between; align-items:center;">
                        <div style="font-size:14px; font-weight:600;">Priya Sharma</div>
                        <i data-lucide="chevron-right" class="icon" style="width:14px;height:14px; color:var(--light-gray);"></i>
                    </div>
                    <div style="font-size:12px; color:var(--mid-gray); margin-top:2px;">2 cows &middot; 8.0L today</div>
                    <div style="font-size:11px; color:var(--light-gray); margin-top:2px;">Village: Mathura</div>
                </div>

                <!-- Bottom Nav -->
                <div class="ui-nav">
                    <div class="on"><i data-lucide="home" class="icon" style="width:14px;height:14px;"></i><br>Home</div>
                    <div><i data-lucide="users" class="icon" style="width:14px;height:14px;"></i><br>Farmers</div>
                    <div><i data-lucide="bug" class="icon" style="width:14px;height:14px;"></i><br>Cows</div>
                    <div><i data-lucide="utensils" class="icon" style="width:14px;height:14px;"></i><br>Diet</div>
                    <div><i data-lucide="more-horizontal" class="icon" style="width:14px;height:14px;"></i><br>More</div>
                </div>

            </div>
        </div>

        <!-- Annotation: Extension Worker Dashboard -->
        <div class="annotation">
            <div class="annotation-title">Extension Worker Dashboard</div>
            <ul>
                <li>Shown when user role is <code>extension_worker</code> OR user has created farmer profiles (<code>isManagingFarmers</code>)</li>
                <li>Toggle switches between organization view ("My Farmers") and personal view ("Personal" &mdash; shows FarmerDashboard)</li>
                <li>Import CSV navigates to <code>/farmers/import</code></li>
                <li>"Add Farmer" navigates to <code>/farmers/new</code></li>
                <li>"Record Yield" navigates to <code>/yields/new</code></li>
                <li>Farmer cards are clickable &rarr; navigate to <code>/farmers/:id</code></li>
            </ul>
        </div>

        <!-- ──────────────────────────────────────────────────── -->
        <!-- Annotation: Layout Components                        -->
        <!-- ──────────────────────────────────────────────────── -->
        <div class="annotation">
            <div class="annotation-title">Layout Components</div>
            <ul>
                <li><strong>PullToRefresh</strong> wraps the entire page &mdash; swipe down to refresh data</li>
                <li><strong>FAB</strong> (Floating Action Button) at bottom-right with 3 quick actions:
                    <ul>
                        <li>Add Cow &rarr; <code>/cows/new</code></li>
                        <li>Log Milk &rarr; <code>/logs/new</code></li>
                        <li>Get Diet &rarr; <code>/diet/new</code></li>
                    </ul>
                </li>
                <li>FAB hidden on pages with <code>hideBottomNav</code> or <code>hideFab</code> meta</li>
                <li><strong>OfflineIndicator</strong> banner shows at top when network is disconnected</li>
                <li><strong>SyncStatusChip</strong> in toolbar shows sync state (synced / pending / error)</li>
                <li><strong>UpdatePrompt</strong> dialog shown when new PWA version is available</li>
                <li><strong>SyncConflictDialog</strong> shown when offline changes conflict with server data</li>
            </ul>
        </div>

        <!-- ──────────────────────────────────────────────────── -->
        <!-- Annotation: Navigation                               -->
        <!-- ──────────────────────────────────────────────────── -->
        <div class="annotation">
            <div class="annotation-title">Navigation</div>
            <ul>
                <li><strong>Bottom nav</strong> (mobile &lt; 768px): 5 tabs &mdash; Home, Farmers, Cows, Diet, More (Settings)</li>
                <li><strong>Side drawer</strong> (tablet / desktop): Full menu with 9 items &mdash; Home, Farmers, My Cows, Diet Plans, Feeds, Milk Logs, Yield History, Reports, Settings</li>
                <li>Drawer header shows user avatar, name, email</li>
                <li>Active tab highlighted in both nav bars</li>
                <li>Page transitions use fade animation (200ms)</li>
            </ul>
        </div>

    </main>

    <script>lucide.createIcons();</script>
</body>
</html>
