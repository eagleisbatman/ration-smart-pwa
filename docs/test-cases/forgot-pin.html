<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>03 — Forgot PIN Test Cases</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=IBM+Plex+Sans:wght@400;500;600&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
    <link rel="stylesheet" href="../shared.css">
</head>
<body>
    <nav class="sidebar">
        <div class="sidebar-brand"><i data-lucide="beef" class="icon"></i> RationSmart</div>
        <div class="sidebar-subtitle">Test Cases &middot; 14 Pages</div>
        <h3>Overview</h3>
        <a href="index.html"><span class="nav-num">00</span> Overview &amp; Glossary</a>
        <h3>Authentication</h3>
        <a href="registration.html"><span class="nav-num">01</span> Registration (8)</a>
        <a href="login.html"><span class="nav-num">02</span> Login (10)</a>
        <a href="forgot-pin.html" class="active"><span class="nav-num">03</span> Forgot PIN (5)</a>
        <a href="onboarding.html"><span class="nav-num">04</span> Onboarding (12)</a>
        <h3>Core Features</h3>
        <a href="dashboard.html"><span class="nav-num">05</span> Dashboard (8)</a>
        <a href="cow-management.html"><span class="nav-num">06</span> Cow Management (13)</a>
        <a href="diet-optimization.html"><span class="nav-num">07</span> Diet Optimization (17)</a>
        <a href="feeds.html"><span class="nav-num">08</span> Feeds (7)</a>
        <a href="milk-logging.html"><span class="nav-num">09</span> Milk Logging (8)</a>
        <a href="farmer-management.html"><span class="nav-num">10</span> Farmer Mgmt (10)</a>
        <a href="yield-reporting.html"><span class="nav-num">11</span> Yield Reporting (7)</a>
        <h3>Settings &amp; Platform</h3>
        <a href="settings.html"><span class="nav-num">12</span> Settings (10)</a>
        <a href="navigation-pwa.html"><span class="nav-num">13</span> Navigation &amp; PWA (12)</a>
    </nav>
    <main class="main">
        <div class="page-title">03 — Forgot PIN Test Cases</div>
        <div class="page-route">Module: Forgot PIN &middot; Route: /auth/forgot-pin &middot; 5 Test Cases</div>

        <!-- ── TC-FP-01 ── -->
        <div class="tc critical">
            <div class="tc-header">
                <span class="tc-id">TC-FP-01</span>
                <span class="tc-title">Submit Email for PIN Reset</span>
                <span class="tc-priority">Critical</span>
            </div>
            <div class="tc-body">
                <h4>Preconditions</h4>
                <div class="tc-pre">Account with email "reset@test.com" exists. App is at /auth/forgot-pin.</div>

                <h4>Steps</h4>
                <ol class="tc-steps">
                    <li>Ensure the Email toggle is active (selected by default)</li>
                    <li>Enter "reset@test.com" in the email input field</li>
                    <li>Tap the "Send Reset Link" button</li>
                </ol>

                <h4>Expected Result</h4>
                <div class="tc-expected">Green success banner appears with the message: "PIN reset instructions have been sent." A countdown begins displaying "Redirecting to login in 3..." and counts down to 0, then auto-redirects to /auth/login.</div>

                <h4>Acceptance Criteria</h4>
                <ul class="tc-checks">
                    <li>Success banner is visible with green styling</li>
                    <li>Countdown counts down from 3 to 2 to 1</li>
                    <li>Auto-redirects to /auth/login after 3 seconds</li>
                    <li>No error messages are displayed</li>
                </ul>
            </div>
        </div>

        <!-- ── TC-FP-02 ── -->
        <div class="tc high">
            <div class="tc-header">
                <span class="tc-id">TC-FP-02</span>
                <span class="tc-title">Submit Phone for PIN Reset</span>
                <span class="tc-priority">High</span>
            </div>
            <div class="tc-body">
                <h4>Preconditions</h4>
                <div class="tc-pre">Account with a registered phone number exists. App is at /auth/forgot-pin.</div>

                <h4>Steps</h4>
                <ol class="tc-steps">
                    <li>Tap the Phone toggle to switch from Email to Phone input</li>
                    <li>Select India as the country (or confirm it is pre-selected)</li>
                    <li>Enter the registered phone number in the phone input field</li>
                    <li>Tap the "Send Reset Link" button</li>
                </ol>

                <h4>Expected Result</h4>
                <div class="tc-expected">Success banner appears confirming PIN reset instructions sent. Countdown begins and auto-redirects to /auth/login after 3 seconds.</div>

                <h4>Acceptance Criteria</h4>
                <ul class="tc-checks">
                    <li>Phone input shows country flag and dial code prefix</li>
                    <li>Success banner appears after submission</li>
                    <li>Redirects to /auth/login after countdown completes</li>
                </ul>
            </div>
        </div>

        <!-- ── TC-FP-03 ── -->
        <div class="tc high">
            <div class="tc-header">
                <span class="tc-id">TC-FP-03</span>
                <span class="tc-title">Success Banner and Auto-Redirect Countdown</span>
                <span class="tc-priority">High</span>
            </div>
            <div class="tc-body">
                <h4>Preconditions</h4>
                <div class="tc-pre">A valid forgot-pin request has just been submitted (success state is active).</div>

                <h4>Steps</h4>
                <ol class="tc-steps">
                    <li>After submitting a valid request, observe the success banner text</li>
                    <li>Watch the countdown text as it decrements each second</li>
                    <li>Wait 3 seconds and observe the page navigation</li>
                </ol>

                <h4>Expected Result</h4>
                <div class="tc-expected">Banner text includes "PIN reset instructions sent". Countdown displays: "Redirecting to login in 3..." then "...2..." then "...1..." then the page automatically navigates to /auth/login.</div>

                <h4>Acceptance Criteria</h4>
                <ul class="tc-checks">
                    <li>Countdown decrements once per second (3, 2, 1)</li>
                    <li>Redirect happens automatically when countdown reaches 0</li>
                    <li>No user action is required for the redirect</li>
                    <li>If user navigates away manually before countdown ends, the timer stops cleanly (no errors)</li>
                </ul>
            </div>
        </div>

        <!-- ── TC-FP-04 ── -->
        <div class="tc medium">
            <div class="tc-header">
                <span class="tc-id">TC-FP-04</span>
                <span class="tc-title">Non-Existent Email Shows Error</span>
                <span class="tc-priority">Medium</span>
            </div>
            <div class="tc-body">
                <h4>Preconditions</h4>
                <div class="tc-pre">No account with email "nobody@test.com" exists in the system.</div>

                <h4>Steps</h4>
                <ol class="tc-steps">
                    <li>Enter "nobody@test.com" in the email input field</li>
                    <li>Tap the "Send Reset Link" button</li>
                </ol>

                <h4>Expected Result</h4>
                <div class="tc-expected">An error banner appears with a message such as "No account found" or a similar error. No redirect occurs and the user remains on the /auth/forgot-pin page.</div>

                <h4>Acceptance Criteria</h4>
                <ul class="tc-checks">
                    <li>Red/negative error banner is visible</li>
                    <li>No success message is displayed</li>
                    <li>No countdown appears</li>
                    <li>User can retry with a different email</li>
                </ul>
            </div>
        </div>

        <!-- ── TC-FP-05 ── -->
        <div class="tc low">
            <div class="tc-header">
                <span class="tc-id">TC-FP-05</span>
                <span class="tc-title">Back to Login Link Works</span>
                <span class="tc-priority">Low</span>
            </div>
            <div class="tc-body">
                <h4>Preconditions</h4>
                <div class="tc-pre">App is at /auth/forgot-pin.</div>

                <h4>Steps</h4>
                <ol class="tc-steps">
                    <li>Locate the "Back to Login" link (displayed with an arrow icon)</li>
                    <li>Tap the "Back to Login" link</li>
                </ol>

                <h4>Expected Result</h4>
                <div class="tc-expected">The app navigates to /auth/login and the login page loads correctly.</div>

                <h4>Acceptance Criteria</h4>
                <ul class="tc-checks">
                    <li>URL is /auth/login after navigation</li>
                    <li>Login page loads correctly with all expected elements</li>
                    <li>No errors occur during navigation</li>
                </ul>
            </div>
        </div>

    </main>
    <script>lucide.createIcons();</script>
</body>
</html>
