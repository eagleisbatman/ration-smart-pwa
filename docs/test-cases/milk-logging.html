<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RationSmart Tests - Milk Logging</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=IBM+Plex+Sans:wght@400;500;600&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
    <link rel="stylesheet" href="../shared.css">
</head>
<body>
    <nav class="sidebar">
        <div class="sidebar-brand"><i data-lucide="beef" class="icon"></i> RationSmart</div>
        <div class="sidebar-subtitle">Test Cases &middot; 14 Pages</div>
        <h3>Overview</h3>
        <a href="index.html"><span class="nav-num">00</span> Overview &amp; Glossary</a>
        <h3>Authentication</h3>
        <a href="registration.html"><span class="nav-num">01</span> Registration (8)</a>
        <a href="login.html"><span class="nav-num">02</span> Login (10)</a>
        <a href="forgot-pin.html"><span class="nav-num">03</span> Forgot PIN (5)</a>
        <a href="onboarding.html"><span class="nav-num">04</span> Onboarding (12)</a>
        <h3>Core Features</h3>
        <a href="dashboard.html"><span class="nav-num">05</span> Dashboard (8)</a>
        <a href="cow-management.html"><span class="nav-num">06</span> Cow Management (13)</a>
        <a href="diet-optimization.html"><span class="nav-num">07</span> Diet Optimization (17)</a>
        <a href="feeds.html"><span class="nav-num">08</span> Feeds (7)</a>
        <a href="milk-logging.html" class="active"><span class="nav-num">09</span> Milk Logging (13)</a>
        <a href="farmer-management.html"><span class="nav-num">10</span> Farmer Mgmt (10)</a>
        <a href="yield-reporting.html"><span class="nav-num">11</span> Yield Reporting (7)</a>
        <h3>Settings &amp; Platform</h3>
        <a href="settings.html"><span class="nav-num">12</span> Settings (10)</a>
        <a href="navigation-pwa.html"><span class="nav-num">13</span> Navigation &amp; PWA (12)</a>
    </nav>
    <main class="main">

        <div class="page-title">09 &mdash; Milk Logging Test Cases</div>
        <div class="page-route">Module: Milk Logging &middot; Route: /milk-logs &middot; 13 Test Cases</div>

        <!-- ════════════════════════════════════════════════════ -->
        <!-- TC-MILK-01 -->
        <!-- ════════════════════════════════════════════════════ -->
        <div class="tc critical">
            <div class="tc-header">
                <span class="tc-id">TC-MILK-01</span>
                <span class="tc-title">Add New Milk Log &mdash; Happy Path</span>
                <span class="tc-priority">Critical</span>
            </div>
            <div class="tc-body">
                <h4>Preconditions</h4>
                <div class="tc-pre">
                    User is logged in and at least 1 active cow exists in the system. The app is accessible and the user has navigated to the main screen.
                </div>

                <h4>Steps</h4>
                <ol class="tc-steps">
                    <li>Navigate to the <strong>Milk Logs</strong> section from the dashboard or bottom navigation.</li>
                    <li>Tap the <strong>(+)</strong> floating action button to open the new milk log form.</li>
                    <li>Tap the <strong>Cow</strong> dropdown (required) and select a cow from the list. If the form was opened via a deep link with a <code>cow_id</code> query parameter, verify the cow is pre-selected. Milk logging means recording how much milk a cow produces each day. Farmers typically milk cows twice daily (morning and evening). Amounts are in liters.</li>
                    <li>Select a <strong>Log date</strong> using the date picker (defaults to today).</li>
                    <li>Enter the <strong>Morning liters</strong> (e.g., <code>5.5</code>).</li>
                    <li>Enter the <strong>Evening liters</strong> (e.g., <code>4.0</code>).</li>
                    <li>Observe the <strong>Total</strong> field. It should auto-calculate as morning + evening (e.g., <code>9.5</code>) and should not be directly editable.</li>
                    <li>Optionally enter a <strong>Fat %</strong> value (e.g., <code>4.5</code>).</li>
                    <li>Optionally enter an <strong>SNF %</strong> (Solids-Not-Fat percentage) value (e.g., <code>8.7</code>).</li>
                    <li>Optionally enter a <strong>Temperature</strong> value for milk temperature at collection (e.g., <code>37.2</code>).</li>
                    <li>Optionally enter text in the <strong>Notes</strong> textarea (e.g., <code>Cow seemed healthy, good yield today</code>).</li>
                    <li>Tap the <strong>Save</strong> button to submit the milk log.</li>
                </ol>

                <h4>Expected Result</h4>
                <div class="tc-expected">
                    The milk log is created successfully. The total displayed equals morning + evening amounts (e.g., 9.5 liters) and is auto-calculated (not editable). All optional fields (fat %, SNF %, temperature, notes) are saved when provided. The app redirects to the milk log list view. The new entry appears at the top of the list.
                </div>

                <h4>Acceptance Criteria</h4>
                <ul class="tc-checks">
                    <li>Milk log is saved without errors</li>
                    <li>Cow selection is required; form does not submit without a cow selected</li>
                    <li>Cow is pre-selected when <code>cow_id</code> query parameter is present</li>
                    <li>Total is correctly auto-calculated as morning + evening amounts and is not editable</li>
                    <li>Optional fields (fat %, SNF %, temperature, notes) are accepted and saved when provided</li>
                    <li>User is redirected to the milk log list after saving</li>
                    <li>The newly created entry appears at the top of the list</li>
                    <li>The entry displays the correct cow name, date, milk amounts, and any optional field values</li>
                </ul>
            </div>
        </div>

        <!-- ════════════════════════════════════════════════════ -->
        <!-- TC-MILK-02 -->
        <!-- ════════════════════════════════════════════════════ -->
        <div class="tc high">
            <div class="tc-header">
                <span class="tc-id">TC-MILK-02</span>
                <span class="tc-title">Edit Existing Milk Log</span>
                <span class="tc-priority">High</span>
            </div>
            <div class="tc-body">
                <h4>Preconditions</h4>
                <div class="tc-pre">
                    At least 1 milk log entry already exists in the system. The user is on the milk log list view.
                </div>

                <h4>Steps</h4>
                <ol class="tc-steps">
                    <li>Tap an existing milk log entry in the list to open its detail view.</li>
                    <li>Tap the <strong>Edit</strong> button to switch to edit mode. The form fields become editable.</li>
                    <li>Change the <strong>Evening milk amount</strong> to a different value (e.g., change from <code>4.0</code> to <code>6.0</code>).</li>
                    <li>Tap the <strong>Save</strong> button to submit the changes.</li>
                </ol>

                <h4>Expected Result</h4>
                <div class="tc-expected">
                    The milk log is updated with the new evening amount. The total is recalculated to reflect the change (e.g., morning 5.5 + new evening 6.0 = 11.5 liters). The list view reflects the updated entry with the new values.
                </div>

                <h4>Acceptance Criteria</h4>
                <ul class="tc-checks">
                    <li>Edit form loads with the existing values pre-filled</li>
                    <li>Updated values are saved without errors</li>
                    <li>Total is recalculated based on the new values</li>
                    <li>The list view shows the updated entry with correct amounts</li>
                </ul>
            </div>
        </div>

        <!-- ════════════════════════════════════════════════════ -->
        <!-- TC-MILK-03 -->
        <!-- ════════════════════════════════════════════════════ -->
        <div class="tc medium">
            <div class="tc-header">
                <span class="tc-id">TC-MILK-03</span>
                <span class="tc-title">Optional Nutritional Fields (Fat %, SNF %, Temperature)</span>
                <span class="tc-priority">Medium</span>
            </div>
            <div class="tc-body">
                <h4>Preconditions</h4>
                <div class="tc-pre">
                    The user is on the milk log form (either new or edit mode). Milk fat % is the percentage of fat in the milk, typically 3&ndash;5% for dairy cows. SNF % (Solids-Not-Fat) is the percentage of protein, lactose, and minerals in the milk, typically 8&ndash;9%. Temperature is the milk temperature at the time of collection, typically around 37&deg;C for fresh milk. All three are measured at the dairy collection center or with handheld instruments.
                </div>

                <h4>Steps</h4>
                <ol class="tc-steps">
                    <li>Fill in the required fields (cow, morning liters, evening liters, date) but leave <strong>Fat %</strong>, <strong>SNF %</strong>, and <strong>Temperature</strong> all empty. Tap <strong>Save</strong>.</li>
                    <li>Verify the log is saved successfully without any of the optional nutritional fields.</li>
                    <li>Open the new milk log form again. Fill in the required fields and also enter a <strong>Fat %</strong> value of <code>4.5</code>, an <strong>SNF %</strong> value of <code>8.7</code>, and a <strong>Temperature</strong> value of <code>37.2</code>. Tap <strong>Save</strong>.</li>
                    <li>Open the second log entry and verify that fat %, SNF %, and temperature are all displayed on the log detail view with the correct values.</li>
                    <li>Open the new milk log form a third time. Fill in the required fields and enter only a <strong>Fat %</strong> value of <code>3.8</code>, leaving SNF % and temperature empty. Tap <strong>Save</strong>. Verify only fat % is displayed on the detail view; SNF % and temperature are absent or shown as empty.</li>
                </ol>

                <h4>Expected Result</h4>
                <div class="tc-expected">
                    All three logs are saved successfully. The fat %, SNF %, and temperature fields are each independently optional and do not block form submission when left empty. When values are entered, they accept valid numeric input and are stored and displayed on the log detail view. Any combination of these optional fields can be provided or omitted.
                </div>

                <h4>Acceptance Criteria</h4>
                <ul class="tc-checks">
                    <li>Milk log saves successfully when all three optional fields are left empty</li>
                    <li>Milk log saves successfully when all three optional fields are provided</li>
                    <li>Milk log saves successfully when only some optional fields are provided</li>
                    <li>Fat % accepts valid numeric values and is displayed on the log detail when provided</li>
                    <li>SNF % accepts valid numeric values and is displayed on the log detail when provided</li>
                    <li>Temperature accepts valid numeric values and is displayed on the log detail when provided</li>
                    <li>All three fields are clearly marked as optional in the form</li>
                    <li>No validation errors appear when any combination of optional fields is left empty</li>
                </ul>
            </div>
        </div>

        <!-- ════════════════════════════════════════════════════ -->
        <!-- TC-MILK-04 -->
        <!-- ════════════════════════════════════════════════════ -->
        <div class="tc high">
            <div class="tc-header">
                <span class="tc-id">TC-MILK-04</span>
                <span class="tc-title">Milk Log List with Date Grouping</span>
                <span class="tc-priority">High</span>
            </div>
            <div class="tc-body">
                <h4>Preconditions</h4>
                <div class="tc-pre">
                    Multiple milk log entries exist across different dates (e.g., logs from today, yesterday, and a week ago). The user is logged in.
                </div>

                <h4>Steps</h4>
                <ol class="tc-steps">
                    <li>Navigate to the <strong>Milk Logs</strong> list view from the dashboard or bottom navigation.</li>
                    <li>Observe the list layout. Verify that entries are grouped under date headers.</li>
                    <li>Check that the most recent date group appears at the top of the list.</li>
                    <li>Within each date group, verify that each entry displays: the cow name, morning amount, evening amount, total, and date.</li>
                    <li>Check for daily total summaries that aggregate all milk logs for each date.</li>
                </ol>

                <h4>Expected Result</h4>
                <div class="tc-expected">
                    Milk logs are grouped by date with the most recent date appearing first. Each entry shows the cow name, morning amount, evening amount, total, and date. Daily totals are visible, aggregating all cow entries for that date.
                </div>

                <h4>Acceptance Criteria</h4>
                <ul class="tc-checks">
                    <li>Logs are grouped by date with visible date headers</li>
                    <li>Most recent date group appears at the top</li>
                    <li>Each entry shows cow name, morning amount, evening amount, and total</li>
                    <li>Daily totals are displayed for each date group</li>
                    <li>Empty dates (no logs) do not appear in the list</li>
                </ul>
            </div>
        </div>

        <!-- ════════════════════════════════════════════════════ -->
        <!-- TC-MILK-05 -->
        <!-- ════════════════════════════════════════════════════ -->
        <div class="tc high">
            <div class="tc-header">
                <span class="tc-id">TC-MILK-05</span>
                <span class="tc-title">Duplicate Entry Warning for Same Cow + Date</span>
                <span class="tc-priority">High</span>
            </div>
            <div class="tc-body">
                <h4>Preconditions</h4>
                <div class="tc-pre">
                    A milk log already exists for <strong>Cow A</strong> on today's date. The user is on the milk log list or dashboard.
                </div>

                <h4>Steps</h4>
                <ol class="tc-steps">
                    <li>Tap the <strong>(+)</strong> button to open the new milk log form.</li>
                    <li>Select <strong>Cow A</strong> from the cow dropdown (the same cow that already has a log for today).</li>
                    <li>Select today's date in the <strong>Log date</strong> picker (or confirm it defaults to today).</li>
                    <li>Observe the form after both cow and date are set. A <strong>warning banner</strong> should appear on the form alerting the user that a milk log for this cow on this date already exists.</li>
                    <li>Enter morning and evening milk amounts despite the warning.</li>
                    <li>Tap the <strong>Save</strong> button to confirm the user can still proceed and submit the log.</li>
                </ol>

                <h4>Expected Result</h4>
                <div class="tc-expected">
                    A warning banner is displayed on the form as soon as the duplicate cow + date combination is detected, alerting the user that an entry for this cow on this date already exists. The warning does not block submission &mdash; the user can still proceed and save the milk log if they choose to.
                </div>

                <h4>Acceptance Criteria</h4>
                <ul class="tc-checks">
                    <li>Warning banner appears on the form when the selected cow + date matches an existing milk log</li>
                    <li>Warning text clearly identifies the potential duplicate (cow and date)</li>
                    <li>The warning is non-blocking &mdash; the user can still proceed and save the entry</li>
                    <li>The warning disappears if the user changes the cow or date to a non-duplicate combination</li>
                    <li>If the user proceeds, the new milk log is saved as a separate entry</li>
                </ul>
            </div>
        </div>

        <!-- ════════════════════════════════════════════════════ -->
        <!-- TC-MILK-06 -->
        <!-- ════════════════════════════════════════════════════ -->
        <div class="tc high">
            <div class="tc-header">
                <span class="tc-id">TC-MILK-06</span>
                <span class="tc-title">Create Milk Log Offline &mdash; Syncs When Online</span>
                <span class="tc-priority">High</span>
            </div>
            <div class="tc-body">
                <h4>Preconditions</h4>
                <div class="tc-pre">
                    The device is offline (airplane mode or Wi-Fi/data disabled). The app has been previously opened while online so that the service worker and local data are cached.
                </div>

                <h4>Steps</h4>
                <ol class="tc-steps">
                    <li>Confirm the device is offline (check the status bar or network settings).</li>
                    <li>Navigate to <strong>Milk Logs</strong> and tap the <strong>(+)</strong> button to open the new milk log form.</li>
                    <li>Select a cow, enter morning and evening amounts, select a date, and tap <strong>Save</strong>.</li>
                    <li>Verify the log is saved locally. Look for an offline indicator or badge on the entry (e.g., a sync icon, "Pending" label, or similar visual cue).</li>
                    <li>Reconnect the device to the internet (turn off airplane mode or re-enable Wi-Fi/data).</li>
                    <li>Wait for the app to detect connectivity and initiate a background sync.</li>
                </ol>

                <h4>Expected Result</h4>
                <div class="tc-expected">
                    The milk log is saved locally with a visible offline indicator or badge. When the device reconnects to the internet, the log automatically syncs to the backend. The offline indicator disappears and the sync status updates to indicate successful synchronization.
                </div>

                <h4>Acceptance Criteria</h4>
                <ul class="tc-checks">
                    <li>Milk log form is accessible and functional while offline</li>
                    <li>Log is saved to local storage without errors</li>
                    <li>An offline indicator or badge is visible on the pending entry</li>
                    <li>Auto-sync triggers when connectivity is restored</li>
                    <li>Sync status updates to reflect successful upload to the backend</li>
                    <li>The offline indicator disappears after successful sync</li>
                </ul>
            </div>
        </div>

        <!-- ════════════════════════════════════════════════════ -->
        <!-- TC-MILK-07 -->
        <!-- ════════════════════════════════════════════════════ -->
        <div class="tc medium">
            <div class="tc-header">
                <span class="tc-id">TC-MILK-07</span>
                <span class="tc-title">Total Milk Calculation (Morning + Evening)</span>
                <span class="tc-priority">Medium</span>
            </div>
            <div class="tc-body">
                <h4>Preconditions</h4>
                <div class="tc-pre">
                    The user is on the milk log form (new entry). The morning and evening amount fields are visible and empty.
                </div>

                <h4>Steps</h4>
                <ol class="tc-steps">
                    <li>Enter <code>5.5</code> in the <strong>Morning milk amount</strong> field (in liters).</li>
                    <li>Observe the total display area. Verify it updates to show <code>5.5</code> liters (morning only, evening still empty or zero).</li>
                    <li>Enter <code>4.0</code> in the <strong>Evening milk amount</strong> field (in liters).</li>
                    <li>Observe the total display area. Verify it updates in real-time to show <code>9.5</code> liters (5.5 + 4.0).</li>
                    <li>Change the morning amount to <code>6.0</code>. Verify the total updates immediately to <code>10.0</code> liters (6.0 + 4.0).</li>
                </ol>

                <h4>Expected Result</h4>
                <div class="tc-expected">
                    The total is automatically calculated and displayed as the sum of morning and evening amounts (e.g., 5.5 + 4.0 = 9.5 liters). The total updates in real-time as the user types or changes either value.
                </div>

                <h4>Acceptance Criteria</h4>
                <ul class="tc-checks">
                    <li>Total is calculated as morning + evening amounts</li>
                    <li>Total updates in real-time as values are entered or changed</li>
                    <li>Total displays correctly with decimal values (e.g., 9.5, not 9 or 10)</li>
                    <li>Total shows 0 or is hidden when both fields are empty</li>
                    <li>No rounding errors in the displayed total</li>
                </ul>
            </div>
        </div>

        <!-- ════════════════════════════════════════════════════ -->
        <!-- TC-MILK-08 -->
        <!-- ════════════════════════════════════════════════════ -->
        <div class="tc medium">
            <div class="tc-header">
                <span class="tc-id">TC-MILK-08</span>
                <span class="tc-title">Cow Dropdown Only Shows Active Cows</span>
                <span class="tc-priority">Medium</span>
            </div>
            <div class="tc-body">
                <h4>Preconditions</h4>
                <div class="tc-pre">
                    Multiple cows exist in the system. At least one cow is active and at least one cow has been deleted or marked as inactive.
                </div>

                <h4>Steps</h4>
                <ol class="tc-steps">
                    <li>Navigate to the <strong>Milk Logs</strong> section and tap the <strong>(+)</strong> button to open the new milk log form.</li>
                    <li>Tap the <strong>Cow</strong> dropdown to open the list of available cows.</li>
                    <li>Scroll through the dropdown and note which cows are listed.</li>
                    <li>Verify that only <strong>active</strong> cows appear in the dropdown. Deleted or inactive cows should not be listed.</li>
                    <li>If many cows exist, test whether the dropdown is searchable by typing a cow name or partial name into the search area (if available).</li>
                </ol>

                <h4>Expected Result</h4>
                <div class="tc-expected">
                    Only active cows are shown in the cow dropdown. Deleted or inactive cows are not listed. If the farmer has many cows, the dropdown supports search or filtering to quickly find the desired cow.
                </div>

                <h4>Acceptance Criteria</h4>
                <ul class="tc-checks">
                    <li>Only active cows appear in the dropdown list</li>
                    <li>Deleted or inactive cows are not shown</li>
                    <li>Dropdown is searchable when many cows exist</li>
                    <li>Cow names are displayed clearly and are identifiable</li>
                    <li>Dropdown loads without delay or errors</li>
                </ul>
            </div>
        </div>

        <!-- ════════════════════════════════════════════════════ -->
        <!-- TC-MILK-09 -->
        <!-- ════════════════════════════════════════════════════ -->
        <div class="tc high">
            <div class="tc-header">
                <span class="tc-id">TC-MILK-09</span>
                <span class="tc-title">Diet Adherence Toggle Shown</span>
                <span class="tc-priority">High</span>
            </div>
            <div class="tc-body">
                <h4>Preconditions</h4>
                <div class="tc-pre">
                    The selected cow has an actively followed diet (i.e., a diet has been optimized and is currently being tracked for this cow). The user is logged in and at least 1 active cow with an active diet exists in the system.
                </div>

                <h4>Steps</h4>
                <ol class="tc-steps">
                    <li>Navigate to the <strong>Milk Logs</strong> section and tap the <strong>(+)</strong> button to open the new milk log form.</li>
                    <li>Select a cow that has an actively followed diet from the <strong>Cow</strong> dropdown.</li>
                    <li>Observe the form after selecting the cow. Look for a <strong>&ldquo;Fed diet today?&rdquo;</strong> card section on the form.</li>
                    <li>Verify the card displays the <strong>diet name</strong> and <strong>cost/day</strong> associated with the cow&rsquo;s active diet.</li>
                    <li>Verify the card contains <strong>Yes/No toggle buttons</strong> allowing the user to indicate whether the cow was fed the recommended diet.</li>
                </ol>

                <h4>Expected Result</h4>
                <div class="tc-expected">
                    A &ldquo;Fed diet today?&rdquo; card appears on the milk log form after selecting a cow with an active diet. The card displays the diet name and cost/day, and provides Yes/No toggle buttons for the user to record diet adherence.
                </div>

                <h4>Acceptance Criteria</h4>
                <ul class="tc-checks">
                    <li>Diet adherence card is visible when a cow with an active diet is selected</li>
                    <li>Card displays the correct diet name for the selected cow</li>
                    <li>Card displays the correct cost/day for the active diet</li>
                    <li>Yes/No toggle buttons are present and tappable</li>
                    <li>Card appears only after a cow is selected (not before)</li>
                </ul>
            </div>
        </div>

        <!-- ════════════════════════════════════════════════════ -->
        <!-- TC-MILK-10 -->
        <!-- ════════════════════════════════════════════════════ -->
        <div class="tc medium">
            <div class="tc-header">
                <span class="tc-id">TC-MILK-10</span>
                <span class="tc-title">Diet Adherence Toggle Hidden</span>
                <span class="tc-priority">Medium</span>
            </div>
            <div class="tc-body">
                <h4>Preconditions</h4>
                <div class="tc-pre">
                    The selected cow does NOT have an active diet (i.e., no diet has been optimized for the cow, or the cow is not currently following any diet). The user is logged in and at least 1 active cow without an active diet exists in the system.
                </div>

                <h4>Steps</h4>
                <ol class="tc-steps">
                    <li>Navigate to the <strong>Milk Logs</strong> section and tap the <strong>(+)</strong> button to open the new milk log form.</li>
                    <li>Select a cow that does <strong>not</strong> have an active diet from the <strong>Cow</strong> dropdown.</li>
                    <li>Observe the form after selecting the cow. Inspect the area where the diet adherence card would normally appear.</li>
                    <li>Verify that no &ldquo;Fed diet today?&rdquo; card or diet adherence section is shown on the form.</li>
                </ol>

                <h4>Expected Result</h4>
                <div class="tc-expected">
                    No diet adherence section is shown on the milk log form when the selected cow does not have an active diet. The form displays only the standard milk log fields without the diet adherence card.
                </div>

                <h4>Acceptance Criteria</h4>
                <ul class="tc-checks">
                    <li>No diet adherence card is visible when the selected cow has no active diet</li>
                    <li>The rest of the milk log form remains unaffected and fully functional</li>
                    <li>Switching from a cow with an active diet to one without removes the diet adherence card</li>
                    <li>Switching from a cow without an active diet to one with an active diet shows the diet adherence card</li>
                </ul>
            </div>
        </div>

        <!-- ════════════════════════════════════════════════════ -->
        <!-- TC-MILK-11 -->
        <!-- ════════════════════════════════════════════════════ -->
        <div class="tc high">
            <div class="tc-header">
                <span class="tc-id">TC-MILK-11</span>
                <span class="tc-title">Diet Adherence &mdash; Yes Selected</span>
                <span class="tc-priority">High</span>
            </div>
            <div class="tc-body">
                <h4>Preconditions</h4>
                <div class="tc-pre">
                    The selected cow has an active diet and the &ldquo;Fed diet today?&rdquo; card is visible on the milk log form. The user has filled in the required milk log fields (cow, date, morning and/or evening amounts).
                </div>

                <h4>Steps</h4>
                <ol class="tc-steps">
                    <li>On the milk log form, locate the <strong>&ldquo;Fed diet today?&rdquo;</strong> card.</li>
                    <li>Tap the <strong>&ldquo;Yes, fed as recommended&rdquo;</strong> toggle button.</li>
                    <li>Verify the &ldquo;Yes&rdquo; button is visually highlighted or selected, and the &ldquo;No&rdquo; button is deselected.</li>
                    <li>Fill in the remaining required fields (morning and/or evening amounts) if not already done.</li>
                    <li>Tap the <strong>Save</strong> button to submit the milk log.</li>
                </ol>

                <h4>Expected Result</h4>
                <div class="tc-expected">
                    The milk log is saved successfully with <code>fed_diet=true</code> and the <code>diet_history_id</code> field populated with the identifier of the cow&rsquo;s current active diet. The diet adherence data is persisted alongside the standard milk log fields.
                </div>

                <h4>Acceptance Criteria</h4>
                <ul class="tc-checks">
                    <li>Milk log is saved without errors when &ldquo;Yes&rdquo; is selected</li>
                    <li>The saved log record contains <code>fed_diet=true</code></li>
                    <li>The saved log record contains a valid <code>diet_history_id</code> referencing the cow&rsquo;s active diet</li>
                    <li>The &ldquo;Yes&rdquo; button is visually highlighted when selected</li>
                    <li>Selecting &ldquo;Yes&rdquo; deselects &ldquo;No&rdquo; if it was previously selected</li>
                </ul>
            </div>
        </div>

        <!-- ════════════════════════════════════════════════════ -->
        <!-- TC-MILK-12 -->
        <!-- ════════════════════════════════════════════════════ -->
        <div class="tc high">
            <div class="tc-header">
                <span class="tc-id">TC-MILK-12</span>
                <span class="tc-title">Diet Adherence &mdash; No Selected</span>
                <span class="tc-priority">High</span>
            </div>
            <div class="tc-body">
                <h4>Preconditions</h4>
                <div class="tc-pre">
                    The selected cow has an active diet and the &ldquo;Fed diet today?&rdquo; card is visible on the milk log form. The user has filled in the required milk log fields (cow, date, morning and/or evening amounts).
                </div>

                <h4>Steps</h4>
                <ol class="tc-steps">
                    <li>On the milk log form, locate the <strong>&ldquo;Fed diet today?&rdquo;</strong> card.</li>
                    <li>Tap the <strong>&ldquo;No, did not feed&rdquo;</strong> toggle button.</li>
                    <li>Verify the &ldquo;No&rdquo; button is visually highlighted or selected, and the &ldquo;Yes&rdquo; button is deselected.</li>
                    <li>Fill in the remaining required fields (morning and/or evening amounts) if not already done.</li>
                    <li>Tap the <strong>Save</strong> button to submit the milk log.</li>
                </ol>

                <h4>Expected Result</h4>
                <div class="tc-expected">
                    The milk log is saved successfully with <code>fed_diet=false</code> and the <code>diet_history_id</code> field populated with the identifier of the cow&rsquo;s current active diet. The diet adherence data is persisted alongside the standard milk log fields, recording that the farmer did not feed the recommended diet.
                </div>

                <h4>Acceptance Criteria</h4>
                <ul class="tc-checks">
                    <li>Milk log is saved without errors when &ldquo;No&rdquo; is selected</li>
                    <li>The saved log record contains <code>fed_diet=false</code></li>
                    <li>The saved log record contains a valid <code>diet_history_id</code> referencing the cow&rsquo;s active diet</li>
                    <li>The &ldquo;No&rdquo; button is visually highlighted when selected</li>
                    <li>Selecting &ldquo;No&rdquo; deselects &ldquo;Yes&rdquo; if it was previously selected</li>
                </ul>
            </div>
        </div>

        <!-- ════════════════════════════════════════════════════ -->
        <!-- TC-MILK-13 -->
        <!-- ════════════════════════════════════════════════════ -->
        <div class="tc medium">
            <div class="tc-header">
                <span class="tc-id">TC-MILK-13</span>
                <span class="tc-title">Diet Adherence &mdash; Not Selected (Skipped)</span>
                <span class="tc-priority">Medium</span>
            </div>
            <div class="tc-body">
                <h4>Preconditions</h4>
                <div class="tc-pre">
                    The selected cow has an active diet and the &ldquo;Fed diet today?&rdquo; card is visible on the milk log form. The user has filled in the required milk log fields (cow, date, morning and/or evening amounts) but has not interacted with the diet adherence toggle.
                </div>

                <h4>Steps</h4>
                <ol class="tc-steps">
                    <li>On the milk log form, locate the <strong>&ldquo;Fed diet today?&rdquo;</strong> card.</li>
                    <li>Do <strong>not</strong> tap either the &ldquo;Yes&rdquo; or &ldquo;No&rdquo; toggle button. Leave the diet adherence selection untouched.</li>
                    <li>Verify that neither toggle button is highlighted or selected (both are in their default/unselected state).</li>
                    <li>Fill in the remaining required fields (morning and/or evening amounts) if not already done.</li>
                    <li>Tap the <strong>Save</strong> button to submit the milk log.</li>
                </ol>

                <h4>Expected Result</h4>
                <div class="tc-expected">
                    The milk log saves successfully even though no diet adherence option was selected. The saved record contains <code>fed_diet=undefined</code> (or null), indicating the user chose to skip the diet adherence question. The diet adherence toggle is optional and does not block form submission.
                </div>

                <h4>Acceptance Criteria</h4>
                <ul class="tc-checks">
                    <li>Milk log saves successfully without selecting a diet adherence option</li>
                    <li>The saved log record contains <code>fed_diet=undefined</code> (or null/not set)</li>
                    <li>No validation error is shown for the diet adherence field when it is not selected</li>
                    <li>The diet adherence toggle is not a required field</li>
                    <li>All other required fields are still validated normally</li>
                </ul>
            </div>
        </div>

    </main>
    <script>lucide.createIcons();</script>
</body>
</html>
