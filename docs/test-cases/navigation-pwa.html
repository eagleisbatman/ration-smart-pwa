<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RationSmart Tests - Navigation &amp; PWA</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=IBM+Plex+Sans:wght@400;500;600&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
    <link rel="stylesheet" href="../shared.css">
</head>
<body>
    <nav class="sidebar">
        <div class="sidebar-brand"><i data-lucide="beef" class="icon"></i> RationSmart</div>
        <div class="sidebar-subtitle">Test Cases &middot; 14 Pages</div>
        <h3>Overview</h3>
        <a href="index.html"><span class="nav-num">00</span> Overview &amp; Glossary</a>
        <h3>Authentication</h3>
        <a href="registration.html"><span class="nav-num">01</span> Registration (8)</a>
        <a href="login.html"><span class="nav-num">02</span> Login (10)</a>
        <a href="forgot-pin.html"><span class="nav-num">03</span> Forgot PIN (5)</a>
        <a href="onboarding.html"><span class="nav-num">04</span> Onboarding (12)</a>
        <h3>Core Features</h3>
        <a href="dashboard.html"><span class="nav-num">05</span> Dashboard (8)</a>
        <a href="cow-management.html"><span class="nav-num">06</span> Cow Management (13)</a>
        <a href="diet-optimization.html"><span class="nav-num">07</span> Diet Optimization (17)</a>
        <a href="feeds.html"><span class="nav-num">08</span> Feeds (7)</a>
        <a href="milk-logging.html"><span class="nav-num">09</span> Milk Logging (8)</a>
        <a href="farmer-management.html"><span class="nav-num">10</span> Farmer Mgmt (10)</a>
        <a href="yield-reporting.html"><span class="nav-num">11</span> Yield Reporting (7)</a>
        <h3>Settings &amp; Platform</h3>
        <a href="settings.html"><span class="nav-num">12</span> Settings (10)</a>
        <a href="navigation-pwa.html" class="active"><span class="nav-num">13</span> Navigation &amp; PWA (12)</a>
    </nav>
    <main class="main">

        <div class="page-title">13 &mdash; Navigation &amp; PWA Test Cases</div>
        <div class="page-route">Module: Navigation &amp; PWA &middot; Routes: Global &middot; 12 Test Cases</div>

        <!-- ════════════════════════════════════════════════════ -->
        <!-- TC-NAV-01 -->
        <!-- ════════════════════════════════════════════════════ -->
        <div class="tc high">
            <div class="tc-header">
                <span class="tc-id">TC-NAV-01</span>
                <span class="tc-title">Bottom Navigation Shows 5 Tabs</span>
                <span class="tc-priority">High</span>
            </div>
            <div class="tc-body">
                <h4>Preconditions</h4>
                <div class="tc-pre">
                    Logged in and on any main app page. The bottom navigation bar should be visible at the bottom of the screen.
                </div>

                <h4>Steps</h4>
                <ol class="tc-steps">
                    <li>View the bottom navigation bar at the bottom of the screen. Count the number of tab icons displayed.</li>
                    <li>Identify each tab by its icon and label: <strong>Home</strong> (house icon), <strong>Farmers</strong> (people icon), <strong>Cows</strong> (cow/pet icon), <strong>Diet</strong> (restaurant/utensils icon), <strong>More</strong> (settings/gear icon).</li>
                    <li>Observe which tab is currently highlighted/active. It should correspond to the page you are currently viewing.</li>
                    <li>Tap the <strong>Farmers</strong> tab and verify you navigate to the Farmers page.</li>
                    <li>Tap the <strong>Cows</strong> tab and verify you navigate to the Cows page.</li>
                    <li>Tap the <strong>Diet</strong> tab and verify you navigate to the Diet page.</li>
                    <li>Tap the <strong>More</strong> tab and verify you navigate to the More/Settings page.</li>
                    <li>Tap the <strong>Home</strong> tab and verify you navigate back to the Home/Dashboard page.</li>
                </ol>

                <h4>Expected Result</h4>
                <div class="tc-expected">
                    Five tabs are visible in the bottom navigation bar: Home (house icon), Farmers (people icon), Cows (cow/pet icon), Diet (restaurant/utensils icon), and More (settings/gear icon). The active tab is visually highlighted. Tapping each tab navigates to the correct corresponding page.
                </div>

                <h4>Acceptance Criteria</h4>
                <ul class="tc-checks">
                    <li>Exactly 5 tabs are displayed in the bottom navigation bar</li>
                    <li>Each tab shows the correct icon and label (Home, Farmers, Cows, Diet, More)</li>
                    <li>The currently active tab is visually highlighted/distinguished</li>
                    <li>Tapping each tab navigates to the correct page</li>
                    <li>The active highlight updates to reflect the newly selected tab after navigation</li>
                </ul>
            </div>
        </div>

        <!-- ════════════════════════════════════════════════════ -->
        <!-- TC-NAV-02 -->
        <!-- ════════════════════════════════════════════════════ -->
        <div class="tc high">
            <div class="tc-header">
                <span class="tc-id">TC-NAV-02</span>
                <span class="tc-title">Side Drawer Shows Full Menu on Tablet/Desktop</span>
                <span class="tc-priority">High</span>
            </div>
            <div class="tc-body">
                <h4>Preconditions</h4>
                <div class="tc-pre">
                    Logged in and viewing the app on a tablet or desktop device with screen width greater than 1024px.
                </div>

                <h4>Steps</h4>
                <ol class="tc-steps">
                    <li>Open the app on a tablet or desktop browser with a viewport width greater than <strong>1024px</strong>.</li>
                    <li>Observe the left side of the screen for a persistent side drawer/sidebar navigation.</li>
                    <li>Verify the side drawer displays 9 menu items: <strong>Home</strong>, <strong>Farmers</strong>, <strong>My Cows</strong>, <strong>Diet Plans</strong>, <strong>Feeds</strong>, <strong>Milk Logs</strong>, <strong>Yield History</strong>, <strong>Reports</strong>, <strong>Settings</strong>.</li>
                    <li>Verify each menu item shows both an icon and a text label.</li>
                    <li>Verify that the currently active page's menu item is visually highlighted.</li>
                    <li>Navigate to a different page by clicking a menu item and confirm the drawer remains visible (persistent) and the active highlight updates.</li>
                </ol>

                <h4>Expected Result</h4>
                <div class="tc-expected">
                    The side drawer is persistently visible (always shown, not hidden behind a hamburger menu) on screens wider than 1024px. It displays 9 menu items, each with an icon and label. The active item is highlighted. The drawer remains visible during page navigation.
                </div>

                <h4>Acceptance Criteria</h4>
                <ul class="tc-checks">
                    <li>Side drawer is visible and persistent on screens wider than 1024px</li>
                    <li>All 9 menu items are displayed: Home, Farmers, My Cows, Diet Plans, Feeds, Milk Logs, Yield History, Reports, Settings</li>
                    <li>Each menu item has an icon and a text label</li>
                    <li>The active/current page item is visually highlighted</li>
                    <li>Drawer remains visible when navigating between pages</li>
                </ul>
            </div>
        </div>

        <!-- ════════════════════════════════════════════════════ -->
        <!-- TC-NAV-03 -->
        <!-- ════════════════════════════════════════════════════ -->
        <div class="tc medium">
            <div class="tc-header">
                <span class="tc-id">TC-NAV-03</span>
                <span class="tc-title">FAB Quick Actions Navigate Correctly</span>
                <span class="tc-priority">Medium</span>
            </div>
            <div class="tc-body">
                <h4>Preconditions</h4>
                <div class="tc-pre">
                    Logged in and on the Home, Cows, or Diet page. The FAB (Floating Action Button) &mdash; a round button typically in the bottom-right corner with a <strong>+</strong> icon &mdash; should be visible.
                </div>

                <h4>Steps</h4>
                <ol class="tc-steps">
                    <li>Navigate to the <strong>Home</strong> page. Locate the FAB (Floating Action Button), the round <strong>+</strong> button in the bottom-right corner of the screen.</li>
                    <li>Tap the FAB. A quick action menu should appear with 3 options.</li>
                    <li>Verify the 3 quick actions shown are: <strong>"Add Cow"</strong>, <strong>"Log Milk"</strong>, and <strong>"Get Diet"</strong>.</li>
                    <li>Tap <strong>"Add Cow"</strong> and verify you are navigated to <code>/cows/new</code>.</li>
                    <li>Navigate back to the Home page. Tap the FAB again, then tap <strong>"Log Milk"</strong>. Verify you are navigated to <code>/logs/new</code>.</li>
                    <li>Navigate back to the Home page. Tap the FAB again, then tap <strong>"Get Diet"</strong>. Verify you are navigated to <code>/diet/new</code>.</li>
                    <li>While on a form page (e.g., <code>/cows/new</code>), verify that the FAB is <strong>not visible</strong> (it should be hidden on add/edit screens).</li>
                </ol>

                <h4>Expected Result</h4>
                <div class="tc-expected">
                    The FAB displays a quick action menu with 3 options: "Add Cow" (navigates to <code>/cows/new</code>), "Log Milk" (navigates to <code>/logs/new</code>), and "Get Diet" (navigates to <code>/diet/new</code>). The FAB is hidden on form pages such as add/edit screens.
                </div>

                <h4>Acceptance Criteria</h4>
                <ul class="tc-checks">
                    <li>FAB is visible on Home, Cows, and Diet pages</li>
                    <li>Tapping FAB reveals 3 quick actions: "Add Cow", "Log Milk", "Get Diet"</li>
                    <li>"Add Cow" navigates to <code>/cows/new</code></li>
                    <li>"Log Milk" navigates to <code>/logs/new</code></li>
                    <li>"Get Diet" navigates to <code>/diet/new</code></li>
                    <li>FAB is hidden on form/add/edit pages</li>
                </ul>
            </div>
        </div>

        <!-- ════════════════════════════════════════════════════ -->
        <!-- TC-NAV-04 -->
        <!-- ════════════════════════════════════════════════════ -->
        <div class="tc medium">
            <div class="tc-header">
                <span class="tc-id">TC-NAV-04</span>
                <span class="tc-title">Back Button Navigates to Previous Page</span>
                <span class="tc-priority">Medium</span>
            </div>
            <div class="tc-body">
                <h4>Preconditions</h4>
                <div class="tc-pre">
                    Logged in. Navigated from the cow list page to a cow detail page, and then to the edit cow page. The header should display a back arrow on detail and form pages (indicated by <code>showBack: true</code> in route meta).
                </div>

                <h4>Steps</h4>
                <ol class="tc-steps">
                    <li>Navigate to the <strong>Cows list</strong> page.</li>
                    <li>Tap on a cow to open its <strong>cow detail</strong> page. Verify the header shows a back arrow icon.</li>
                    <li>Tap <strong>Edit</strong> to open the <strong>edit cow</strong> form. Verify the header shows a back arrow icon.</li>
                    <li>Tap the <strong>back arrow</strong> in the header. Verify you return to the <strong>cow detail</strong> page.</li>
                    <li>Tap the <strong>back arrow</strong> again. Verify you return to the <strong>cow list</strong> page.</li>
                </ol>

                <h4>Expected Result</h4>
                <div class="tc-expected">
                    The back arrow in the header navigates to the previous page in the navigation stack. From the edit cow page, tapping back returns to the cow detail page. From the cow detail page, tapping back returns to the cow list page. The back button is displayed on all detail and form pages where the route meta has <code>showBack: true</code>.
                </div>

                <h4>Acceptance Criteria</h4>
                <ul class="tc-checks">
                    <li>Back arrow is visible on detail and form pages</li>
                    <li>Tapping back from edit cow returns to cow detail</li>
                    <li>Tapping back from cow detail returns to cow list</li>
                    <li>Back button respects the navigation history stack</li>
                    <li>Back button is shown on all pages with <code>showBack: true</code> in route meta</li>
                </ul>
            </div>
        </div>

        <!-- ════════════════════════════════════════════════════ -->
        <!-- TC-NAV-05 -->
        <!-- ════════════════════════════════════════════════════ -->
        <div class="tc low">
            <div class="tc-header">
                <span class="tc-id">TC-NAV-05</span>
                <span class="tc-title">404 Page Shown for Invalid Routes</span>
                <span class="tc-priority">Low</span>
            </div>
            <div class="tc-body">
                <h4>Preconditions</h4>
                <div class="tc-pre">
                    Logged in to the app.
                </div>

                <h4>Steps</h4>
                <ol class="tc-steps">
                    <li>In the browser address bar, manually type a non-existent URL path such as <code>/this-page-does-not-exist</code> and press Enter.</li>
                    <li>Observe the page that loads.</li>
                    <li>Look for a link or button to return to the home page.</li>
                </ol>

                <h4>Expected Result</h4>
                <div class="tc-expected">
                    A dedicated 404 "Page Not Found" error page is displayed. The page includes a clear message indicating the page was not found. A link or button to return to the home page is available.
                </div>

                <h4>Acceptance Criteria</h4>
                <ul class="tc-checks">
                    <li>A 404 error page is displayed for non-existent routes</li>
                    <li>The page shows a "Page Not Found" message or equivalent</li>
                    <li>A link or button to navigate back to the home page is available</li>
                    <li>The app does not crash or display a blank page</li>
                </ul>
            </div>
        </div>

        <!-- ════════════════════════════════════════════════════ -->
        <!-- TC-NAV-06 -->
        <!-- ════════════════════════════════════════════════════ -->
        <div class="tc high">
            <div class="tc-header">
                <span class="tc-id">TC-NAV-06</span>
                <span class="tc-title">Offline Page Shown When No Connection and No Cache</span>
                <span class="tc-priority">High</span>
            </div>
            <div class="tc-body">
                <h4>Preconditions</h4>
                <div class="tc-pre">
                    Browser cache is cleared. Internet connection is disconnected. No service worker cache is available (or this is a completely fresh browser profile).
                </div>

                <h4>Steps</h4>
                <ol class="tc-steps">
                    <li>Clear the browser cache and all site data for the app domain (or use a fresh browser profile with no prior visits).</li>
                    <li>Disconnect from the internet (turn off Wi-Fi, enable airplane mode, or use browser DevTools to toggle "Offline" mode).</li>
                    <li>Attempt to load the app by navigating to the app URL.</li>
                    <li>Observe the page that is displayed.</li>
                </ol>

                <h4>Expected Result</h4>
                <div class="tc-expected">
                    A dedicated offline page is shown if the service worker was previously installed and cached an offline fallback page. Otherwise, the browser's default offline page (e.g., Chrome's "No internet" dinosaur page) is displayed. In either case, a message indicates that no internet connection is available.
                </div>

                <h4>Acceptance Criteria</h4>
                <ul class="tc-checks">
                    <li>The app does not show a blank screen or crash</li>
                    <li>A clear message indicates the device is offline or has no connection</li>
                    <li>If service worker was previously installed, a custom offline page is shown</li>
                    <li>If no service worker cache exists, the browser's default offline page is shown</li>
                </ul>
            </div>
        </div>

        <!-- ════════════════════════════════════════════════════ -->
        <!-- TC-NAV-07 -->
        <!-- ════════════════════════════════════════════════════ -->
        <div class="tc critical">
            <div class="tc-header">
                <span class="tc-id">TC-NAV-07</span>
                <span class="tc-title">App Loads from Cache When Offline</span>
                <span class="tc-priority">Critical</span>
            </div>
            <div class="tc-body">
                <h4>Preconditions</h4>
                <div class="tc-pre">
                    The app was previously loaded while online, and the service worker has cached all necessary assets and pages.
                </div>

                <h4>Steps</h4>
                <ol class="tc-steps">
                    <li>With the app previously loaded while online, disconnect from the internet (turn off Wi-Fi, enable airplane mode, or use browser DevTools "Offline" mode).</li>
                    <li>Refresh or reload the app in the browser.</li>
                    <li>Verify the app loads normally from the service worker cache.</li>
                    <li>Navigate to previously visited pages (e.g., Home, Cows, Diet) and verify they load.</li>
                    <li>Look for an offline indicator in the toolbar &mdash; a banner, icon, or text such as "You're offline" &mdash; confirming the app recognizes it is running without a network connection.</li>
                </ol>

                <h4>Expected Result</h4>
                <div class="tc-expected">
                    The app loads normally from the service worker cache even without an internet connection. All previously visited pages are accessible. An offline indicator is visible in the toolbar (such as a banner or icon showing "You're offline"). Navigation between cached pages works smoothly.
                </div>

                <h4>Acceptance Criteria</h4>
                <ul class="tc-checks">
                    <li>App loads fully from service worker cache when offline</li>
                    <li>Previously visited pages are accessible and render correctly</li>
                    <li>An offline indicator (banner, icon, or text) is visible in the toolbar</li>
                    <li>Navigation between cached pages works without errors</li>
                    <li>No network error screens are shown for cached content</li>
                </ul>
            </div>
        </div>

        <!-- ════════════════════════════════════════════════════ -->
        <!-- TC-NAV-08 -->
        <!-- ════════════════════════════════════════════════════ -->
        <div class="tc critical">
            <div class="tc-header">
                <span class="tc-id">TC-NAV-08</span>
                <span class="tc-title">Offline-Created Data Syncs When Back Online</span>
                <span class="tc-priority">Critical</span>
            </div>
            <div class="tc-body">
                <h4>Preconditions</h4>
                <div class="tc-pre">
                    Data was created while offline (e.g., a new cow, a milk log entry, or similar record). The app is showing a pending sync count or indicator.
                </div>

                <h4>Steps</h4>
                <ol class="tc-steps">
                    <li>While offline, create one or more data records (e.g., add a cow, log milk production). Verify the app stores these locally and shows a pending sync indicator or count.</li>
                    <li>Reconnect to the internet (turn on Wi-Fi, disable airplane mode, or toggle off DevTools "Offline" mode).</li>
                    <li>Wait for the app to detect the network connection and begin syncing automatically, or trigger a manual sync if available.</li>
                    <li>Verify all offline-created records are uploaded to the backend. Check that the pending sync count goes to <strong>0</strong>.</li>
                    <li>Verify the data appears in the backend/API by refreshing the relevant list pages or checking via API tools.</li>
                    <li>Look for a success notification confirming the sync completed.</li>
                </ol>

                <h4>Expected Result</h4>
                <div class="tc-expected">
                    Sync happens automatically when the internet connection is restored (or upon manual trigger). All offline-created records are uploaded to the backend. The pending sync count goes to 0. The data appears correctly in the backend/API. A success notification is shown to the user.
                </div>

                <h4>Acceptance Criteria</h4>
                <ul class="tc-checks">
                    <li>Sync begins automatically when internet is restored (or on manual trigger)</li>
                    <li>All offline-created records are uploaded to the backend</li>
                    <li>Pending sync count decreases to 0 after successful sync</li>
                    <li>Data appears correctly in the backend/API</li>
                    <li>A success notification is displayed after sync completes</li>
                </ul>
            </div>
        </div>

        <!-- ════════════════════════════════════════════════════ -->
        <!-- TC-NAV-09 -->
        <!-- ════════════════════════════════════════════════════ -->
        <div class="tc high">
            <div class="tc-header">
                <span class="tc-id">TC-NAV-09</span>
                <span class="tc-title">Sync Conflict Resolution Dialog</span>
                <span class="tc-priority">High</span>
            </div>
            <div class="tc-body">
                <h4>Preconditions</h4>
                <div class="tc-pre">
                    A data record (e.g., a cow) has been modified on both the local device (while offline) and on the backend simultaneously by another user or device.
                </div>

                <h4>Steps</h4>
                <ol class="tc-steps">
                    <li>Go offline (disconnect internet).</li>
                    <li>Edit a cow's weight to <strong>500 kg</strong> locally on the device.</li>
                    <li>Meanwhile, on another device or via the backend API, update the same cow's weight to <strong>480 kg</strong>.</li>
                    <li>Reconnect the first device to the internet.</li>
                    <li>Wait for or trigger the sync process.</li>
                    <li>Observe the conflict resolution dialog that appears.</li>
                </ol>

                <h4>Expected Result</h4>
                <div class="tc-expected">
                    A conflict is detected during the sync process. A dialog appears showing: "Conflict detected for [Cow Name]" with three options: <strong>"Keep My Changes"</strong> (applies the local version, 500 kg), <strong>"Keep Server Version"</strong> (applies the remote version, 480 kg), or <strong>"Review"</strong> (displays both versions side by side for comparison). The user must resolve the conflict before the sync can complete.
                </div>

                <h4>Acceptance Criteria</h4>
                <ul class="tc-checks">
                    <li>Conflict is detected when local and server data differ</li>
                    <li>A conflict resolution dialog is displayed to the user</li>
                    <li>Dialog shows the entity name (e.g., cow name) and the conflicting values</li>
                    <li>Three options are available: "Keep My Changes", "Keep Server Version", "Review"</li>
                    <li>Sync does not complete until the user resolves the conflict</li>
                    <li>After resolution, the chosen version is saved correctly</li>
                </ul>
            </div>
        </div>

        <!-- ════════════════════════════════════════════════════ -->
        <!-- TC-NAV-10 -->
        <!-- ════════════════════════════════════════════════════ -->
        <div class="tc high">
            <div class="tc-header">
                <span class="tc-id">TC-NAV-10</span>
                <span class="tc-title">Role-Based Nav Items</span>
                <span class="tc-priority">High</span>
            </div>
            <div class="tc-body">
                <h4>Preconditions</h4>
                <div class="tc-pre">
                    Two test accounts are available: one with the <strong>Farmer</strong> role and one with the <strong>Extension Worker</strong> role.
                </div>

                <h4>Steps</h4>
                <ol class="tc-steps">
                    <li>Log in with a <strong>Farmer</strong> account. Examine the bottom navigation bar and note which tabs are visible.</li>
                    <li>If a side drawer is available, examine its menu items as well.</li>
                    <li>Log out and then log in with an <strong>Extension Worker</strong> account.</li>
                    <li>Examine the bottom navigation bar and note which tabs are visible. Compare with the Farmer view.</li>
                    <li>Examine the side drawer menu items. Compare with the Farmer view.</li>
                </ol>

                <h4>Expected Result</h4>
                <div class="tc-expected">
                    Navigation items adjust based on user role. For a <strong>Farmer</strong>, the Farmers tab may be hidden or show a limited view. For an <strong>Extension Worker</strong>, the Farmers tab is fully visible with CRUD (create, read, update, delete) access. Side drawer items also adapt: for example, Yield History is visible for Extension Workers but not for Farmers.
                </div>

                <h4>Acceptance Criteria</h4>
                <ul class="tc-checks">
                    <li>Farmer role: Farmers tab is hidden or shows limited view</li>
                    <li>Extension Worker role: Farmers tab is fully visible with CRUD access</li>
                    <li>Navigation items change dynamically based on the logged-in user's role</li>
                    <li>Side drawer items adapt per role (e.g., Yield History visible for Extension Workers only)</li>
                    <li>No unauthorized navigation items are accessible regardless of role</li>
                </ul>
            </div>
        </div>

        <!-- ════════════════════════════════════════════════════ -->
        <!-- TC-NAV-11 -->
        <!-- ════════════════════════════════════════════════════ -->
        <div class="tc low">
            <div class="tc-header">
                <span class="tc-id">TC-NAV-11</span>
                <span class="tc-title">Page Transitions Have Animation</span>
                <span class="tc-priority">Low</span>
            </div>
            <div class="tc-body">
                <h4>Preconditions</h4>
                <div class="tc-pre">
                    Logged in and on any page within the app.
                </div>

                <h4>Steps</h4>
                <ol class="tc-steps">
                    <li>Navigate between pages using the <strong>bottom navigation bar</strong>. Observe the transition animation between pages.</li>
                    <li>Navigate to a detail page and use the <strong>back button</strong> in the header. Observe the transition animation.</li>
                    <li>Tap a link or card on the current page to navigate to a related page. Observe the transition animation.</li>
                    <li>Time the duration of each transition animation. Verify it completes quickly (under 300ms).</li>
                </ol>

                <h4>Expected Result</h4>
                <div class="tc-expected">
                    Pages transition with a smooth fade or slide animation. There are no jarring page jumps or abrupt content changes. All transition animations complete quickly, within 300 milliseconds.
                </div>

                <h4>Acceptance Criteria</h4>
                <ul class="tc-checks">
                    <li>Page transitions include a visible animation (fade, slide, or similar)</li>
                    <li>No jarring jumps or abrupt content switches occur during navigation</li>
                    <li>Animation duration is under 300ms</li>
                    <li>Transitions are consistent across different navigation methods (tabs, back button, links)</li>
                </ul>
            </div>
        </div>

        <!-- ════════════════════════════════════════════════════ -->
        <!-- TC-NAV-12 -->
        <!-- ════════════════════════════════════════════════════ -->
        <div class="tc medium">
            <div class="tc-header">
                <span class="tc-id">TC-NAV-12</span>
                <span class="tc-title">PWA Update Prompt Shown When New Version Available</span>
                <span class="tc-priority">Medium</span>
            </div>
            <div class="tc-body">
                <h4>Preconditions</h4>
                <div class="tc-pre">
                    The app is installed as a PWA or loaded with an active service worker. A new version of the app has been deployed to the server.
                </div>

                <h4>Steps</h4>
                <ol class="tc-steps">
                    <li>Ensure the app is loaded with the current (old) version and the service worker is active.</li>
                    <li>Deploy a new version of the app to the server (or simulate by modifying the service worker's cached assets).</li>
                    <li>Open the app (or if already open, wait for the service worker to detect the update in the background).</li>
                    <li>Observe the update prompt that appears. It should read: <strong>"A new version is available. Update now?"</strong> with two options: <strong>"Update"</strong> and <strong>"Later"</strong>.</li>
                    <li>Tap <strong>"Later"</strong> to dismiss the prompt. Verify the prompt disappears and the app continues with the old version.</li>
                    <li>On the next visit (or after refreshing), verify the prompt reappears.</li>
                    <li>Tap <strong>"Update"</strong>. Verify the app refreshes and loads the new version.</li>
                </ol>

                <h4>Expected Result</h4>
                <div class="tc-expected">
                    An update prompt appears when a new app version is available: "A new version is available. Update now?" with "Update" and "Later" options. Tapping "Update" refreshes the app with the new version. Tapping "Later" dismisses the prompt, but it may reappear on the next visit.
                </div>

                <h4>Acceptance Criteria</h4>
                <ul class="tc-checks">
                    <li>Update prompt appears when a new version is detected by the service worker</li>
                    <li>Prompt displays "A new version is available. Update now?" (or similar wording)</li>
                    <li>"Update" and "Later" options are available</li>
                    <li>Tapping "Update" refreshes the app and loads the new version</li>
                    <li>Tapping "Later" dismisses the prompt without updating</li>
                    <li>The prompt reappears on the next visit if "Later" was chosen</li>
                </ul>
            </div>
        </div>

    </main>
    <script>lucide.createIcons();</script>
</body>
</html>
